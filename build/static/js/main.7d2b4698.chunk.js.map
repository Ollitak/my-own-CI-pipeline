{"version":3,"sources":["components/Blog.js","components/CreateBlog.js","components/Togglable.js","services/blogs.js","services/login.js","App.js","index.js"],"names":["Blog","currentUser","blog","updatingBlog","removingBlog","user","useState","showinfo","setShowinfo","handleViewBlog","concat","id","toString","handleHideBlog","filter","i","handleUpdate","a","console","log","updatedblog","likes","author","title","url","handleDelete","username","style","paddingTop","paddingLeft","border","borderWidth","marginBottom","includes","className","onClick","CreateBlog","addingBlog","setTitle","setAuthor","setUrl","onSubmit","event","preventDefault","type","value","onChange","e","target","Togglable","React","forwardRef","props","ref","visible","setVisible","hideWhenVisible","display","showWhenVisible","toggleVisibility","useImperativeHandle","buttonLabel","children","displayName","baseUrl","token","addBlog","request","config","headers","Authorization","axios","post","response","data","updateBlog","put","deleteBlog","delete","exports","getAll","get","then","setToken","newToken","login","credentials","App","blogs","setBlogs","setUsername","password","setPassword","errorMessage","setErrorMessage","setUser","blogFormRef","useRef","useEffect","blogService","sort","b","loggedUserJSON","window","localStorage","getItem","JSON","parse","handleLogin","loginService","setItem","stringify","setTimeout","current","addedBlog","newList","updatedBlog","newBlogSet","handleLogout","removeItem","map","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.7d2b4698.chunk.js","sourcesContent":["import React, { useState } from 'react'\r\n\r\nconst Blog = ({ blog, updatingBlog, removingBlog, user }) => {\r\n  const [showinfo, setShowinfo] = useState([])\r\n\r\n  const blogStyle = {\r\n    paddingTop: 10,\r\n    paddingLeft: 2,\r\n    border: 'solid',\r\n    borderWidth: 1,\r\n    marginBottom: 5\r\n  }\r\n\r\n  const handleViewBlog = () => {\r\n    setShowinfo(showinfo.concat(blog.id.toString()))\r\n  }\r\n\r\n  const handleHideBlog = () => {\r\n    setShowinfo(showinfo.filter(i => i.toString() !== blog.id.toString()))\r\n  }\r\n\r\n  const handleUpdate = async () => {\r\n    console.log('updating blog...')\r\n    const updatedblog = {\r\n      user: blog.user.id,\r\n      likes: blog.likes + 1,\r\n      author: blog.author,\r\n      title: blog.title,\r\n      url: blog.url\r\n    }\r\n    await updatingBlog(updatedblog, blog.id.toString())\r\n  }\r\n\r\n  const handleDelete = async () => {\r\n    console.log('removing blog...')\r\n    await removingBlog(blog.id.toString())\r\n  }\r\n\r\n\r\n\r\n  const shortinformation = () => {\r\n    return(\r\n      <div>\r\n        {blog.title}\r\n        <button onClick={handleViewBlog}> view </button>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  let currentUser\r\n  if(user) currentUser = user.username\r\n  else currentUser = null\r\n\r\n\r\n  const longinformation = () => {\r\n    return(\r\n      <div className={'blog'}>\r\n        Title: {blog.title}\r\n        <button onClick={handleHideBlog}> hide </button>\r\n        <br/>\r\n        Author: {blog.author}\r\n        <br/>\r\n        Likes: {blog.likes}\r\n        <button onClick={handleUpdate}> like </button>\r\n        <br/>\r\n        Username: {blog.user.username}\r\n        <br/>\r\n        {blog.user.username === currentUser\r\n          ? <button onClick={handleDelete}> remove </button>\r\n          : null\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div style={blogStyle}>\r\n      {showinfo.includes(blog.id.toString()) ? longinformation() : shortinformation()}\r\n      <br/>\r\n    </div>\r\n  )\r\n\r\n\r\n}\r\n\r\n\r\nexport default Blog","import React, { useState } from 'react'\r\n\r\nconst CreateBlog = ({ addingBlog }) => {\r\n\r\n  const [title, setTitle] = useState([])\r\n  const [author, setAuthor] = useState([])\r\n  const [url, setUrl] = useState([])\r\n\r\n  const handleAddingBlog = (event) => {\r\n    event.preventDefault()\r\n    console.log('trying to add blog', title, author, ' ...')\r\n    addingBlog({ title, author, url })\r\n    setTitle('')\r\n    setAuthor('')\r\n    setUrl('')\r\n  }\r\n\r\n  return(\r\n    <div>\r\n      <div>\r\n        <h2> create new blog</h2>\r\n        <form onSubmit={handleAddingBlog}>\r\n          title:\r\n          <input id=\"titleInput\" type=\"text\" value={title} onChange={e => setTitle(e.target.value)}></input>\r\n          <br/>\r\n          author:\r\n          <input id=\"authorInput\" type=\"text\" value={author} onChange={e => setAuthor(e.target.value)}></input>\r\n          <br/>\r\n          url:\r\n          <input id=\"urlInput\" type=\"text\" value={url} onChange={e => setUrl(e.target.value)}></input>\r\n          <br/>\r\n          <button id=\"createButton\" type=\"submit\">create</button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default CreateBlog\r\n\r\n","import React, { useState,useImperativeHandle } from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\n\r\nconst Togglable = React.forwardRef((props, ref, ) => {\r\n  const [visible, setVisible] = useState(false)\r\n\r\n  const hideWhenVisible = { display: visible ? 'none' : '' }\r\n  const showWhenVisible = { display: visible ? '' : 'none' }\r\n\r\n  const toggleVisibility = () => {\r\n    setVisible(!visible)\r\n  }\r\n\r\n  useImperativeHandle(ref, () => {\r\n    return {\r\n      toggleVisibility\r\n    }\r\n  })\r\n\r\n  return (\r\n    <div>\r\n      <div style={hideWhenVisible}>\r\n        <button onClick={toggleVisibility}>{props.buttonLabel}</button>\r\n      </div>\r\n      <div style={showWhenVisible}>\r\n        {props.children}\r\n        <button onClick={toggleVisibility}>close</button>\r\n      </div>\r\n    </div>\r\n  )\r\n})\r\n\r\nTogglable.propTypes = {\r\n  buttonLabel: PropTypes.string.isRequired\r\n}\r\n\r\nTogglable.displayName = 'Togglable'\r\nexport default Togglable\r\n","import axios from 'axios'\r\nconst baseUrl = '/api/blogs'\r\n\r\nlet token = null\r\n\r\nconst setToken = newToken => {\r\n  token = `bearer ${newToken}`\r\n}\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst addBlog = async (request) => {\r\n  const config = {\r\n    headers: { Authorization: token },\r\n  }\r\n\r\n  const response = await axios.post(baseUrl, request, config)\r\n  return response.data\r\n}\r\n\r\n\r\nconst updateBlog = async (request, id) => {\r\n  const response = await axios.put(baseUrl+'/'+id, request)\r\n  return response.data\r\n}\r\n\r\nconst deleteBlog = async (id) => {\r\n  const config = {\r\n    headers: { Authorization: token },\r\n  }\r\n  const response = await axios.delete(baseUrl+'/'+id, config)\r\n  return response.data\r\n}\r\n\r\n\r\n\r\nconst exports = { getAll, addBlog, setToken, updateBlog, deleteBlog }\r\n\r\nexport default exports","import axios from 'axios'\r\nconst baseUrl = '/api/login'\r\n\r\n\r\nconst login = async (credentials) => {\r\n  const response = await axios.post(baseUrl, credentials)\r\n  return response.data\r\n}\r\n\r\nconst exports = { login }\r\nexport default exports","import React, { useState, useEffect, useRef } from 'react'\r\nimport Blog from './components/Blog'\r\nimport CreateBlog from './components/CreateBlog'\r\nimport Togglable from './components/Togglable'\r\nimport blogService from './services/blogs'\r\nimport loginService from './services/login'\r\n\r\nconst testUser = ''\r\nconst testPassword = ''\r\n\r\n\r\nconst App = () => {\r\n  const [blogs, setBlogs] = useState([])\r\n  const [username, setUsername] = useState(testUser)\r\n  const [password, setPassword] = useState(testPassword)\r\n  const [errorMessage, setErrorMessage] = useState('')\r\n  const [user, setUser] = useState(null)\r\n\r\n  const blogFormRef = useRef()\r\n\r\n  useEffect(() => {\r\n    blogService.getAll().then(blogs => {\r\n      console.log('retreiving blogs...')\r\n      blogs.sort((a,b) => b.likes-a.likes)\r\n      setBlogs( blogs )\r\n    }\r\n    )\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    const loggedUserJSON = window.localStorage.getItem('loggedUser')\r\n    if (loggedUserJSON) {\r\n      console.log('User found from local storage')\r\n      const user = JSON.parse(loggedUserJSON)\r\n      setUser(user)\r\n      blogService.setToken(user.token)\r\n    }\r\n  }, [])\r\n\r\n  const loginForm = () => (\r\n    <form onSubmit={handleLogin}>\r\n      <h2>Please, log in</h2>\r\n      <br/>\r\n        Username:\r\n      <input id='username' type=\"text\" value={username} onChange={e => setUsername(e.target.value)}></input>\r\n      <br/>\r\n        Password:\r\n      <input id='password' type=\"password\" value={password} onChange={e => setPassword(e.target.value)}></input>\r\n      <br/>\r\n      <button id='loginbutton' type=\"submit\">login</button>\r\n    </form>\r\n  )\r\n\r\n  const handleLogin = async (event) => {\r\n    event.preventDefault()\r\n    console.log('trying to log in with', username, password, ' ....')\r\n\r\n    try {\r\n      const user = await loginService.login({ username, password })\r\n      console.log('succesfull - logged in')\r\n      console.log('returned token: ', user.token)\r\n      window.localStorage.setItem(\r\n        'loggedUser', JSON.stringify(user)\r\n      )\r\n      blogService.setToken(user.token)\r\n      setUser(user)\r\n      setUsername(testUser)\r\n      setPassword(testPassword)\r\n      setErrorMessage('logged in succesfully')\r\n      setTimeout(() => {\r\n        setErrorMessage(null)\r\n      }, 5000)\r\n\r\n    } catch(e) {\r\n      console.log('login failed ... please check your credentials')\r\n      setErrorMessage('wrong credentials, please check your username and password')\r\n      setTimeout(() => {\r\n        setErrorMessage(null)\r\n      }, 5000)\r\n    }\r\n  }\r\n\r\n  const addingBlog = async (blog) => {\r\n    try{\r\n      blogFormRef.current.toggleVisibility()\r\n      const addedBlog = await blogService.addBlog(blog)\r\n      console.log(addedBlog)\r\n      const newList = blogs.concat(addedBlog)\r\n      setBlogs(newList)\r\n\r\n      console.log('succesfully added ', addedBlog.title, '....')\r\n      setErrorMessage('blog succesfully added... title: ' + addedBlog.title)\r\n      setTimeout(() => {\r\n        setErrorMessage(null)\r\n      }, 5000)\r\n    } catch (e) {\r\n      console.log('sending a blog to the server failed')\r\n      setErrorMessage('sending a blog to the server failed')\r\n      setTimeout(() => {\r\n        setErrorMessage(null)\r\n      }, 5000)\r\n    }\r\n  }\r\n\r\n  const updatingBlog = async (blog, id) => {\r\n    try {\r\n      const updatedBlog = await blogService.updateBlog(blog, id)\r\n\r\n      let newBlogSet = blogs.filter(b => b.id.toString() !== id)\r\n      newBlogSet = newBlogSet.concat(updatedBlog)\r\n      newBlogSet.sort((a,b) => b.likes-a.likes)\r\n      setBlogs(newBlogSet)\r\n\r\n      console.log('succesfully updated ', updatedBlog.title, '....')\r\n      setErrorMessage('blog succesfully updated... title: ' + updatedBlog.title)\r\n      setTimeout(() => {\r\n        setErrorMessage(null)\r\n      }, 5000)\r\n    } catch (e) {\r\n      console.log('updating the blog failed')\r\n      setErrorMessage('updating the blog failed')\r\n      setTimeout(() => {\r\n        setErrorMessage(null)\r\n      }, 5000)\r\n    }\r\n  }\r\n\r\n  const removingBlog = async (id) => {\r\n    try {\r\n      await blogService.deleteBlog(id)\r\n      console.log('succesfully deleted ')\r\n      let newBlogSet = blogs.filter(b => b.id.toString() !== id)\r\n      setBlogs(newBlogSet)\r\n      setErrorMessage('blog succesfully removed')\r\n      setTimeout(() => {\r\n        setErrorMessage(null)\r\n      }, 5000)\r\n    } catch (e) {\r\n      console.log('removing the blog failed')\r\n      setErrorMessage('removing the blog failed')\r\n      setTimeout(() => {\r\n        setErrorMessage(null)\r\n      }, 5000)\r\n    }\r\n\r\n  }\r\n\r\n\r\n\r\n  const handleLogout = (event) => {\r\n    event.preventDefault()\r\n    window.localStorage.removeItem('loggedUser')\r\n    setUser(null)\r\n  }\r\n\r\n  const createBlogForm = () => {\r\n    return (\r\n      <Togglable ref={blogFormRef} buttonLabel={'create a new blog'}>\r\n        <CreateBlog\r\n          addingBlog={addingBlog}\r\n        />\r\n      </Togglable>\r\n    )\r\n  }\r\n\r\n  const logout = () => {\r\n    return (\r\n      <div>\r\n        <b> {user.username} logged in </b>\r\n        <button onClick={handleLogout}> log out </button>\r\n      </div>)\r\n  }\r\n\r\n\r\n\r\n\r\n  return (\r\n    <div>\r\n      <h1> {errorMessage} </h1>\r\n\r\n      {user === null ? null : logout()}\r\n\r\n      {user === null ? loginForm() : createBlogForm()}\r\n\r\n      <h2>blogs</h2>\r\n      {blogs.map(blog =>\r\n        <Blog key={blog.id} blog={blog} updatingBlog={updatingBlog} removingBlog={removingBlog} user={user} />\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport App from './App'\r\n\r\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}